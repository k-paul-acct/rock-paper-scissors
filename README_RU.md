# API игры "Камень, ножницы, бумага"

Добро пожаловать в API игры "Камень, ножницы, бумага". Этот проект является тестовым заданием, которое я выполнил для
спринта Nexign. API предназначен для того, чтобы пользователи могли играть в классическую игру "Камень, ножницы, бумага"
с различными опциями. Ниже приведен обзор используемых технологий, правил игры и конечных точек API.

## Используемые технологии

- **ASP.NET Core с Minimal APIs** - В проекте используется ASP.NET Core с Minimal APIs, что делает кодовую базу более
  лаконичной и простой в сопровождении по сравнению со стандартными контроллерами.
- **FluentValidation** - Для проверки достоверности входных данных и их соответствия требуемым критериям используется
  библиотека FluentValidation, обеспечивающая надежную и гибкую валидацию.
- **Serilog** - Для отслеживания и контроля важных событий и исключений в процессе игры настроено логгирование с
  использованием библиотеки Serilog.
- **In-Memory SQLite** - Для хранения данных на время сессии используется in-memory база данных SQLite.
- **Entity Framework Core** - Для доступа к данным и управления ими используется Entity Framework Core.
- **xUnit с AutoFixture** - Для тестирования в проекте используется фреймворк xUnit вместе с AutoFixture для генерации
  подставных данных. Это обеспечивает качество и надежность кода.
- **Moq** - Для имитации зависимостей и эффективной изоляции тестовых случаев используется библиотека Moq.
- **Docker** - Процесс развертывания оптимизирован с помощью Docker, что обеспечивает простоту настройки и
  воспроизводимость в различных средах окружения.

## Правила игры

- Игра состоит из пяти раундов, в каждом из которых игроки делают свои ходы.
- Игроки могут создать новую игровую сессию, подключиться к существующей игре, указав ее ID, и даже выбрать в качестве
  соперника бота.
- По окончании игры игроки могут получить результаты всех раундов, покинуть или перезапустить игру в другой сессии.
- В течение всей игры игроки имеют возможность получать статистику, показывающую результаты прошедших раундов.
- Игра заканчивается досрочно, если очевидно, кто является победителем, а кто - побежденным.
- Игра может быть прервана, если кто-то из игроков захочет выйти.

## Конечные точки API

Конечные точки API имеют самоописывающие имена и параметры, как ответы и ошибки. Здесь я привожу краткое описание
конечных точек. Полное тестирование можно провести в Swagger.

`POST /game/create` - Создание новой игры, в которой можно выбрать игру с ботом.

`POST /game/join` - Подключение к существующей игре по ее ID.

`POST /game/move` - Сделать ход в текущем раунде. Возможные значения хода: `Rock` - камень, `Paper` - бумага,
`Scissors` - ножницы.

`GET /game/{gameId}/stat` - Получить результаты всех раундов в конце игры.

`POST /game/restart` - Перезапустить игру.

`POST /game/leave` - Покинуть игру.

`GET /game/{gameId}/live` - Получить текущую статистику прошедших раундов во время игры.

## Начало работы

Чтобы локально запустить API, выполните следующие действия:

1. Установите Docker и Docker Compose на свою систему (см. официальные руководства).
2. Клонируйте репозиторий на локальную машину.
3. Перейдите в каталог проекта, а затем в каталог `src`.
4. Создайте в текущем каталоге файл `.env` (можно использовать содержимое файла `.env.example`) и укажите значения
   переменных окружения, если это необходимо.
5. Выполните команду `docker compose up` для сборки и запуска API.
6. Теперь Swagger должен быть доступен по адресу http://localhost:8080/swagger (или другому порту, если вы его
   изменили). Если вы не видите страницу Swagger, то вручную установите `ASPNETCORE_ENVIRONMENT="Development"` в файле
   `.env`.

## Тестирование

Чтобы запустить модульные тесты, выполните следующую команду (необходимо, чтобы в системе был установлен .NET 7 SDK) в
папке `tests/RockPaperScissors/RockPaperScissors.Tests`: `dotnet test`.

## Заключение

Спасибо за оценку моего API. Надеюсь, это продемонстрировало мои навыки использования C#, ASP.NET Core и других
технологий для создания надежного и интерактивного API. Если у вас возникнут вопросы или вы хотите оставить обратную
связь, пожалуйста, смотрите по адресу https://k-pavel.xyz.